p.221

## 연관관계와 관계형 데이터베이스 설계

관계형 데이터베이스는 개체(entity)간의 관계라는 것에 대해서 고민하게 됩니다. 관계형 데이터베이스에서는 일대일, 일대다, 다대일, 다대다, 관계를 이용해서 데이터가 서로간에 어떻게 구성되어 있는지를 표현합니다.
이 표현에서 가장 중요한 것이 PK(주키) , FK(외래키)를 어떻게 설정해서 사용하는 가에 대한 설정입니다. 
예를 들어 '회원' 과 '게시글'의 관계를 보면 다음과 같은 명제를 생각해 볼 수 있습니다.
- 한명의 회원은 여러 게시글을 작성할 수 있다.
- 하나의 게시글은 한명의 회원에 의해서 작성된다.
- 하나의 게시글은 여러개의 댓글을 가질 수 있다.
- 하나의 댓글은 하나의 게시글에 속한다. 

## PK로 설계 , FK로 연관관계 해석
![](https://images.velog.io/images/jinii/post/36bd1e00-8a2d-4f77-9a17-0bafe59f9f61/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-02-11%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%203.47.21.png)
회원 테이블 설계 -> 게시글 설계 -> 댓글테이블 설계 

FK 를 기준으로 위의 관계를 해석하면 다음과 같다. 
- 게시물(board)은 회원(member)과 다대일 (N:1)관계이다. 
- 댓글(reply)은 게시물(board)과 다대일(N:1)관계이다. 
JPA는 객체지향의 입장에서 이들의 관계를 보기 때문에 데이터베이스와 달리 다음과 같은 선택이 가능하다. 
- 회원 엔티티가 게시물 엔티티들을 참조하게 설정해야 하는가?
- 게시물 엔티티에서 회원 엔티티를 참조하게 설정해야하는가?
- 회원, 게시물 엔티티 객체 양쪽에서 서로를 참조하게 설정해야 하는가?

--> **관계형 데이터베이스 모델링**을 위주로 해서 구성
**FK를 사용하는 엔티티가 PK를 가진 엔티티를 참조하는 구조로 설계하면 데이터 베이스와 동일한 구조**
